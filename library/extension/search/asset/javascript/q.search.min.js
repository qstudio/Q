!function(e){document.title;var t=function(e){this.init(e)};t.prototype={selected:function(){return this.loop(e("."+this.selected_filters),"tax").join("&")},title:function(){var t=e("input#searcher").val(),r=(e("select#category").val(),""),s="",a=!1;t>""&&(r=r+e("input#searcher").val()+" | ",s.length>0&&(s+=" + "),s=s+'"'+e("input#searcher").val()+'"',a=!0),$title_default=document.getElementsByTagName("title")[0].innerHTML,!0===a?($title=q_search.search+" | "+q_search.site_name,document.title=r+$title,$page_title=q_search.search+': <span class="bold">'+s+"</span>",e("#q-search h1.entry-title").html($page_title)):(document.title=$title_default,$page_title=q_search.search,e("#q-search h1.entry-title").html(""))},loop:function(t,r){var s=[];return t.each(function(){if("searcher"==e(this).attr("id"))var t="search="+e("#searcher").val();else t=e(this).data(r);t&&s.push(t)}),s},filter:function(t){var r=this;e.ajax({url:QS_CONFIG.ajaxurl,type:"post",data:{action:"q_search",filters:t,callback:QS_CONFIG.callback,table:QS_CONFIG.table,application:QS_CONFIG.application,device:QS_CONFIG.device,post_type:QS_CONFIG.post_type,posts_per_page:QS_CONFIG.posts_per_page,template:QS_CONFIG.template,order:QS_CONFIG.order,order_by:QS_CONFIG.order_by,category_name:QS_CONFIG.category_name,author_name:QS_CONFIG.author_name,tag:QS_CONFIG.tag,queried_object:QS_CONFIG.queried_object,paged:QS_CONFIG.page_number,_ajax_nonce:QS_CONFIG.nonce},beforeSend:function(){e(".q-search-count-results").remove(),!0,r.section.animate({opacity:0},"slow"),e("#q-search .pagination").hide("slow"),"undefined"!=typeof NProgress&&NProgress.start(),r.disable(),e("#q-search-results").empty()},success:function(t){e("#q-search-results").append(t),e(".q-search-count-results").hide();var r=e(".q-search-count-results").html();void 0!==r&&r.length>0&&(e(".q-search-count-results").html(r).show(),$results=e(".q-search-count-results"),$results.insertBefore($results.parent()))},complete:function(){e(".ajax-loaded").fadeIn(),e("html, body").animate({scrollTop:s()},300),e("#ajax-filtered-section").animate({opacity:1},"slow"),e(".pagination").show("slow"),QS_CONFIG.callback&&r.callback(QS_CONFIG.callback),r.reenable(),"undefined"!=typeof NProgress&&NProgress.done(),r.running=!1,!1},error:function(){}})},show_filters:function(){e("#q-search ul.ajax-filters li.ajax-filters-li:gt(0)").show()},hide_filters:function(){e("#q-search ul.ajax-filters li.ajax-filters-li:gt(0)").hide()},disable:function(){e("#q-search-form select").prop("disabled","disabled"),e("#q-search-form :input, #q-search-form button, #q-search-form .ajax-button").attr("disabled",!0)},reenable:function(){e("#q-search-form select").prop("disabled",!1),e("#q-search-form :input, #q-search-form button, #q-search-form .ajax-button").attr("disabled",!1)},callback:function(e){if(!e||!1===e)return!1;window[e]&&window[e]()},hash:function(e,t){window.location.hash="/filter/"+ar},clicker:function(){var t=this;e(document).on("click",this.links,function(r){if(0==t.running){t.first=!1,t.running=!0,QS_CONFIG.queried_object="qs_null";var s=e(this),a=s.parent("li"),n=s.attr("rel");a.length>0&&(a.toggleClass(t.selected_filters),QS_CONFIG.page_number=1),"next"===n?QS_CONFIG.page_number++:"prev"===n?QS_CONFIG.page_number--:s.hasClass("pagelink")&&(QS_CONFIG.page_number=n),t.filter(e("#q-search-form").serialize())}r.preventDefault()}),e(document).on("blur",this.inputs,function(r){if(0==t.running){t.first=!1,t.running=!0,QS_CONFIG.queried_object="qs_null";var s=e(this),a=s.parent("li"),n=s.attr("rel");a.length>0&&(a.toggleClass(t.selected_filters),QS_CONFIG.page_number=1),"next"===n?QS_CONFIG.page_number++:"prev"===n?QS_CONFIG.page_number--:s.hasClass("pagelink")&&(QS_CONFIG.page_number=n),t.filter(e("#q-search-form").serialize())}r.preventDefault()}),e("#q-search-form").on("submit",function(e){e.preventDefault()}),e("#q-search").on("click",".qs-reset",function(t){e("#q-search-form").trigger("reset")}),e("#q-search-form").on("change submit reset",function(r){if(0==t.running){if("reset"==r.type)s="empty=true",e("#q-search-form input[type='reset']").hide(),e("#searcher").val(""),e(".q-search-select").prop("selectedIndex",0);else{var s=e("#q-search-form").serialize();e("#q-search-form input[type='reset']").show()}t.running=!0,QS_CONFIG.queried_object="qs_null",e(this).find("option").removeClass(t.selected_filters);var a=e(this),n=(a.parent("select"),a.attr("rel"));e(this).find(":selected").toggleClass(t.selected_filters),QS_CONFIG.page_number=1,"next"===n?QS_CONFIG.page_number++:"prev"===n?QS_CONFIG.page_number--:a.hasClass("pagelink")&&(QS_CONFIG.page_number=n),t.filter(s)}}),e(document).on("change",this.selects,function(r){if(0==t.running){t.running=!0,QS_CONFIG.queried_object="qs_null",e(this).find("option").removeClass(t.selected_filters);var s=e(this),a=(s.parent("select"),s.attr("rel"));e(this).find(":selected").toggleClass(t.selected_filters),QS_CONFIG.page_number=1,"next"===a?QS_CONFIG.page_number++:"prev"===a?QS_CONFIG.page_number--:s.hasClass("pagelink")&&(QS_CONFIG.page_number=a),t.filter(t.selected())}r.preventDefault()})},reset:function(){e("#q-search #ajax-filtered-section").append("<p class='no-results'></p>"),e(".no-results").html(q_search.on_load_text).fadeIn(),e("#q-search .ajax-loaded").hide(),e("#q-search .pagination").hide(),e(".no-results").hide(),e(".count-results").hide(),e("html, body").animate({scrollTop:s()},300)},init:function(t){this.opts=t,this.running=!1,this.section=e(this.opts.section),this.links=this.opts.links,this.inputs=this.opts.inputs,this.selects=this.opts.selects,this.progbar=e(this.opts.progbar),this.selected_filters=this.opts.selected_filters,e("#q-search-form input[type='reset']").hide(),$results=e(".q-search-count-results"),$results.insertBefore($results.parent()),this.clicker()}};new t({loader:"#ajax-loader",section:"#ajax-filtered-section",links:".paginationNav, .pagelink, #go",inputs:".searcher",selects:".q-search-select",progbar:"#progbar",selected_filters:"filter-selected"});e("body").on("click","nav.pagination a, .q-scroll-top",function(t){t.preventDefault(),e("html, body").animate({scrollTop:s()},300)});var r=e("#searcher").attr("placeholder");function s(){var t="function"==typeof adminBarHeight?adminBarHeight():0;e("#q-search-form").length&&e("#q-search-form").offset().top;return 0}e("#searcher").focus(function(){e(this).attr("placeholder","")}),e("#searcher").focusout(function(){e(this).attr("placeholder",r)}),e("select").each(function(){e(this).prop("selectedIndex",0)})}(jQuery);
